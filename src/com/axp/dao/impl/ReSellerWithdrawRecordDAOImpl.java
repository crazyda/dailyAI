package com.axp.dao.impl;import java.util.ArrayList;import java.util.List;import com.axp.model.AdminUser;import org.hibernate.Session;import org.springframework.stereotype.Repository;import com.axp.dao.ReSellerWithdrawRecordDAO;import com.axp.model.ReSellerWithdrawRecord;import com.axp.query.PageResult;@Repositorypublic class ReSellerWithdrawRecordDAOImpl extends BaseDaoImpl<ReSellerWithdrawRecord> implements ReSellerWithdrawRecordDAO {    @Override    public PageResult<ReSellerWithdrawRecord> getRecordList(Integer currentPage, Integer pageSize, List<AdminUser> adminUsers) {        Session session = sessionFactory.getCurrentSession();        //先获取查询条件；        String queryCount;        String queryList;        if (adminUsers == null) {            queryCount = "select count(r) from ReSellerWithdrawRecord r where r.isValid=1";            queryList = "from ReSellerWithdrawRecord r where r.isValid=1 " + " order by r.id desc";        } else {            queryCount = "select count(r) from ReSellerWithdrawRecord r where r.isValid=1 and r.adminUser in :adminUsers";            queryList = "from ReSellerWithdrawRecord r where r.isValid=1 and r.adminUser in :adminUsers order by r.id desc";        }        Long count;        List<ReSellerWithdrawRecord> list;        if (adminUsers == null) {            //先查询总条数；            count = (Long) session.createQuery(queryCount).uniqueResult();            //计算当前页的数据；            list = session.createQuery(queryList)                    .setFirstResult((currentPage - 1) * pageSize).setMaxResults(pageSize)                    .list();        } else {            //先查询总条数；            count = (Long) session.createQuery(queryCount).setParameterList("adminUsers", adminUsers).uniqueResult();            //计算当前页的数据；            list = session.createQuery(queryList).setParameterList("adminUsers", adminUsers)                    .setFirstResult((currentPage - 1) * pageSize).setMaxResults(pageSize)                    .list();        }        //返回结果；        return new PageResult<>(Integer.parseInt(count.toString()), pageSize, currentPage, list);    }    @Override    public PageResult<ReSellerWithdrawRecord> getCheckedRecord(Integer currentPage, Integer pageSize) {        Session session = sessionFactory.getCurrentSession();        //先获取查询条件；        String queryCount = "select count(r) from ReSellerWithdrawRecord r where r.isValid=1 and r.status=2";        String queryList = "from ReSellerWithdrawRecord r where r.isValid=1 and r.status=2" + " order by r.id desc";        //先查询总条数；        Long count = (Long) session.createQuery(queryCount).uniqueResult();        //计算当前页的数据；        List<ReSellerWithdrawRecord> list = session.createQuery(queryList)                .setFirstResult((currentPage - 1) * pageSize).setMaxResults(pageSize)                .list();        //返回结果；        return new PageResult<>(Integer.parseInt(count.toString()), pageSize, currentPage, list);    }}